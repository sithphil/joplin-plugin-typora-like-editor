# Joplin 插件 - 导入功能需求说明
## 一、核心导入范围

支持导入Markdown格式文本，同步处理文本内容及关联的图片资源，确保导入后笔记内容完整、图片可正常访问，与Joplin原生笔记体验一致。

## 二、文本内容导入规则

将待导入的Markdown文本完整作为笔记正文导入，保留原文的Markdown语法格式（如标题、列表、链接、排版样式等），不做额外修改。

## 三、图片资源导入及引用处理规则

针对Markdown文本中所有图片引用（格式为 ![alt](图片地址)），按图片地址类型分类处理，核心逻辑如下：

3.1 图片地址为URL的处理

若图片引用的地址为网络URL（含http/https协议），保持原有引用不变，不做任何修改，导入后笔记仍通过该URL加载图片。

3.2 图片地址为本地路径/相对路径的处理

若图片引用的地址为本地绝对路径（如Windows的C:\images\test.png、macOS的/Users/xxx/images/test.png）或相对路径（相对于待导入Markdown文件的路径，如./images/test.png），执行以下操作：

1. 图片资源导入：自动定位本地图片文件，将该图片作为附件导入Joplin，纳入Joplin资源库统一管理，确保图片可随笔记同步（如同步至云端、其他设备）。

2. alt字段设置：
   - 如果alt为空，则提取导入图片的文件名（去除后缀扩展名），将其作为图片引用的alt属性值；若图片无文件名（如匿名文件），默认设置alt值为“导入图片”。
   - 如果alt非空，则保持alt不变。

3. 引用地址替换：将原文中对应的本地/相对路径，替换为Joplin内部资源地址（格式为![alt](:/资源ID)），确保导入后笔记可直接加载本地导入的图片，无需依赖原本地路径。

## 四、补充说明

- 无论Markdown是否包含一级标题，均以文件名作为Joplin笔记标题，允许标题与文件名不一致。

- 图片导入失败处理：若本地图片文件不存在、路径错误或无访问权限，记录导入失败日志，并保留原文中的图片引用地址。

- 特殊格式图片支持：兼容常见图片格式（png、jpg、jpeg、gif、svg、webp等），与Joplin原生支持的图片格式保持一致。
